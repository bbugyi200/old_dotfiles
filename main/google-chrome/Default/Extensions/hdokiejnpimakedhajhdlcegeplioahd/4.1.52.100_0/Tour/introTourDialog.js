var IntroTourDialog=function(t,e){"use strict";function i(t,e,i,o,n){var s=0;switch(t){case"top":case"left":s=e?i:i+o;break;case"right":case"bottom":s=e?i+o-n:i-n}return s}function o(t,e,i,o,n){var s=0;switch(t){case"top":case"left":s=e;break;case"right":case"bottom":s=e+i-n;break;case"center":default:s=o-Math.round(n/2)}return s}var n=function(t){Dialog.call(this,t,{closeButtonEnabled:!1,maximizeButtonEnabled:!1,dynamicHeight:!0,hideHeader:!0,hideButtons:!0,confirmOnClose:!1,buttonsInsideContent:!0}),n.prototype._arrow=null,n.prototype._options=null};return n.prototype=Object.create(Dialog.prototype),n.prototype.constructor=n,n.prototype.createButton=function(e,i,o,n){if(e&&i){var s=i.style||"",r=i.sizeStyle||"col-6",a=t("<div></div>").addClass(r).append(t("<button></button>").text(i.text).data("index",o).addClass("btn-base radius-sm "+s).off().on("click",n));e.append(a)}},n.prototype.setup=function(i,o){if(o&&o.options&&o.flow){var n=this;n._options=t.extend({title:Strings.translateString("Tour Title here")},o.options);var s=n.$element.find(".buttons").empty();n.$element.removeClass().addClass("dialog responsive intro-tour-dialog"),n._options.class&&n.$element.addClass(n._options.class);for(var r=0;r<n._options.buttons.length;r++){var a=function(e){e.preventDefault(),o.flow.closeCurrentStep();var i=t(e.target).data("index");if(t.isNumeric(i)&&i>=0&&i<n._options.buttons.length){var s=n._options.buttons[i];s.action&&o.flow.executeAction(s.action)}};this.createButton(s,n._options.buttons[r],r,a)}var l=function(t){t.preventDefault(),o.flow.closeCurrentStep(),n._options.exitAction&&o.flow.executeAction(n._options.exitAction)};i.find("#btnClose").off().on("click",l),this.setText(this._options.title,this.$element.find("#mainTitle"));var p="function"==typeof this._options.contentText1?this._options.contentText1():this._options.contentText1;this.setText(p,this.$element.find("#contentText1"));var h="function"==typeof this._options.contentText2?this._options.contentText2():this._options.contentText2;this.setText(h,this.$element.find("#contentText2")),Dialog.prototype.setup.apply(this,arguments),this.setSize(this._options.position),this.setPosition(this._options.position),this._options.position&&this._options.position.arrowPosition?(this._arrow=this._arrow||new e({$parentEl:this.$element,arrowClass:"arrow-box a-white"}),this._arrow.show(this._options.position.orientation,this._options.position.arrowPosition)):this._arrow&&this._arrow.hide(),this.$overlayDialogEl=t("#dialogOverlay"),this.$overlayDialogEl&&this.$overlayDialogEl.length>0&&this.$overlayDialogEl.detach(),t("body").removeClass("dialogState"),this.subscribeToWindowResize()}},n.prototype.setText=function(t,e){t&&e?e.text(t).show():e.hide()},n.prototype.setPosition=function(e){e.dialogPosition=null,e&&e.targetId&&(e.$targetEl=t(e.targetId),e.targetDimensions=this.getDimensions(e.$targetEl),e.dialogPosition=this.computeDialogPosition(this.$element,e)),e.dialogPosition&&this.$element.offset(e.dialogPosition)},n.prototype.setSize=function(e){if(e){e.$targetEl=t(e.targetId);var i,o=this.getDimensions(e.$targetEl);e.fillWidth?(i=t(e.fillWidth),i&&i.length>0?this.$element.width(i.width()):this.$element.width(o.width)):this.$element.css("width",""),e.fillHeight?(i=t(e.fillHeight),i&&i.length>0?this.$element.height(i.height()):this.$element.height(o.height)):this.$element.css("height","")}},n.prototype.subscribeToWindowResize=function(){var t=this;t.positionAndResizeHandler=function(e){t.setSize(t._options.position),t.setPosition(t._options.position)},window&&window.addEventListener("resize",t.positionAndResizeHandler),Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).subscribe(t.positionAndResizeHandler),Topics.get(Topics.EMPTY_VAULT_STATE_CHANGE).subscribe(t.positionAndResizeHandler)},n.prototype.unSubscribeToWindowResize=function(){var t=this;window&&(window.removeEventListener&&window.removeEventListener("resize",t.positionAndResizeHandler),t.positionAndResizeHandler=null),Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).unsubscribe(t.positionAndResizeHandler),Topics.get(Topics.EMPTY_VAULT_STATE_CHANGE).unsubscribe(t.positionAndResizeHandler)},n.prototype.computeDialogPosition=function(t,e){if(t&&t.length>0&&e&&e.$targetEl.length>0){var n=e.arrowPosition?15:0;e.dialogDimensions=this.getDimensions(t);var s={top:0,left:0},r=e.align||"center";switch(e.orientation){case"top":s.left=o(r,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),s.top=i(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)+n;break;case"bottom":s.left=o(r,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),s.top=i(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)-n;break;case"left":s.top=o(r,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),s.left=i(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)+n;break;case"right":s.top=o(r,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),s.left=i(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)-n}return e.offset&&(s.top+=e.offset.top,s.left+=e.offset.left),s}return null},n.prototype.getDimensions=function(e){if(e&&e.length>0){var i=t.extend({height:e.height(),width:e.width()},e.offset());return i.center={top:Math.round(i.top+i.height/2),left:Math.round(i.left+i.width/2)},i}return null},n.prototype.show=function(){Dialog.prototype.show.apply(this,arguments),t("body").removeClass("dialogState")},n.prototype.hide=function(){Dialog.prototype.hide.apply(this,arguments),t("body").addClass("dialogState")},n.prototype.close=function(e){e&&(Dialog.prototype.close.apply(this,arguments),t("body").removeClass("dialogState"),this.$overlayDialogEl&&t("body").append(this.$overlayDialogEl),this.unSubscribeToWindowResize())},n.prototype.showBlurOverlay=function(){t("body").addClass("dialogState")},n.prototype.hideBlurOverlay=function(){t("body").removeClass("dialogState")},n.prototype.closeOnSuccess=function(){},n.prototype.getZIndex=function(){var t=this.$element.css("z-index");if("auto"===t)return 0;var e=parseInt(t);return e<8?8:e},n}(jQuery,lpArrow);