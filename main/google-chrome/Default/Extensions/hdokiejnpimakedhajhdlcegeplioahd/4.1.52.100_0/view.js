VaultItemBaseDisplay=function(t){this._model=t,this._parent=null,this._contextMenuHandler=this.createContextMenuHandler(),this._eventHandler=LPTools.createEventHandler(this),this._selected=!1,this._element=null,this._$_element=null,this._textElements=[],this._destructed=!1,this._shown=!0,this._isLocked=!1},VaultItemDisplay=function(t){VaultItemBaseDisplay.call(this,t),this._dragStartSelected=!1},VaultItemDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype),VaultItemDisplay.prototype.constructor=VaultItemDisplay,AccountBaseDisplay=function(t){VaultItemDisplay.call(this,t)},AccountBaseDisplay.prototype=Object.create(VaultItemDisplay.prototype),AccountBaseDisplay.prototype.constructor=AccountBaseDisplay,AccountDisplay=function(t){AccountBaseDisplay.call(this,t)},AccountDisplay.prototype=Object.create(AccountBaseDisplay.prototype),AccountDisplay.prototype.constructor=AccountDisplay,ApplicationDisplay=function(t){VaultItemDisplay.call(this,t)},ApplicationDisplay.prototype=Object.create(VaultItemDisplay.prototype),ApplicationDisplay.prototype.constructor=ApplicationDisplay,NoteDisplay=function(t){AccountBaseDisplay.call(this,t)},NoteDisplay.prototype=Object.create(AccountBaseDisplay.prototype),NoteDisplay.prototype.constructor=NoteDisplay,AttachmentDisplay=function(t){VaultItemBaseDisplay.call(this,t)},AttachmentDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype),AttachmentDisplay.prototype.constructor=AttachmentDisplay,FormFillDisplay=function(t){VaultItemDisplay.call(this,t)},FormFillDisplay.prototype=Object.create(VaultItemDisplay.prototype),FormFillDisplay.prototype.constructor=FormFillDisplay,IdentityDisplay=function(t){VaultItemBaseDisplay.call(this,t)},IdentityDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype),IdentityDisplay.prototype.constructor=IdentityDisplay,AllIdentityDisplay=function(t){IdentityDisplay.call(this,t)},AllIdentityDisplay.prototype=Object.create(IdentityDisplay.prototype),AllIdentityDisplay.prototype.constructor=AllIdentityDisplay,GroupDisplay=function(t,e){if(VaultItemBaseDisplay.call(this,t),this._itemCount=0,this._items=[],this._subGroups=[],e)for(var o=0,i=e.length;o<i;++o){var s=e[o];s instanceof GroupDisplay?(this._subGroups.push(s),this._itemCount+=s._itemCount):(this._items.push(s),++this._itemCount),s.setParent(this)}this._model&&(this._contextMenuElement=LPTools.createElement("li",{vaultAction:Constants.ACTION_MOVE_TO_FOLDER},this._model.getName())),this._dragTarget=!0,this._openTimeouts=[],this._itemContents=null,this._subFolderContents=null,this._filter=null,this._filteredItems=null,this._filteredSubGroups=null,this._expanded=!0},GroupDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype),GroupDisplay.prototype.constructor=GroupDisplay,SharedGroupDisplay=function(t,e){GroupDisplay.call(this,t,e)},SharedGroupDisplay.prototype=Object.create(GroupDisplay.prototype),SharedGroupDisplay.prototype.constructor=SharedGroupDisplay,LinkedGroupDisplay=function(t,e){SharedGroupDisplay.call(this,t,e)},LinkedGroupDisplay.prototype=Object.create(SharedGroupDisplay.prototype),LinkedGroupDisplay.prototype.constructor=LinkedGroupDisplay,EmergencyAccessGroupDisplay=function(t,e){LinkedGroupDisplay.call(this,t,e)},EmergencyAccessGroupDisplay.prototype=Object.create(LinkedGroupDisplay.prototype),EmergencyAccessGroupDisplay.prototype.constructor=EmergencyAccessGroupDisplay,Container=function(t,e){if(GroupDisplay.call(this,null,t),this._selectedItems=[],this._lastToggleSelectTarget=null,this._buildOptions=e||{},this._buildOptions.sortFunction=this._buildOptions.sortFunction||this.sortByNameAsc,this.parseExcludeActions(),this._lastSearchTerm=null,this._folderView=!0,this._sortedItems=null,this._sortedFilteredItems=null,this._subscriptions=[],function(t){t.subscribe(Topics.COLLAPSE_ALL,function(){t.collapseAll(),t._buildOptions.folderStateChange&&t._buildOptions.folderStateChange(t)}),t.subscribe(Topics.EXPAND_ALL,function(){t.expandAll(),t._buildOptions.folderStateChange&&t._buildOptions.folderStateChange(t)}),t.subscribe(Topics.DISPLAY_COMPACT,function(){t.displayCompact()}),t.subscribe(Topics.DISPLAY_LARGE,function(){t.displayLarge()}),t.subscribe(Topics.CLEAR_DATA,function(){t.destruct()})}(this),this.separateFavorites()){this.favoritesGroup=new FavoritesGroup,this.favoriteSeparatorSwithedOn=!1,this.favoritesGroup.setParent(this),this.favoritesGroup._buildOptions={excludeActions:[Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU],allowDrag:!1},this.favoritesGroup.parseExcludeActions();for(var o=this.getItemModelChildren(),i=0,s=o.length;i<s;++i){var n=o[i];n.isFavorite()&&this.addFavorite(n)}}!function(t,e){t&&(e.searchInput=$("#"+t),e.searchInput.LP_addSearchHandlers("inputDialog",function(t){e.applySearch(t)}),e._buildOptions.keyboardNavigation&&e.searchInput.bind("keydown.containerSearchNav",function(t){if(40===(t.keyCode||t.which)){var o=e.getAllChildrenOrdered();o.length>0&&(o[0].focus(),t.preventDefault(),t.stopPropagation())}}))}(LPTools.getOption(e,"searchInput",null),this)},Container.prototype=Object.create(GroupDisplay.prototype),Container.prototype.constructor=Container,Container.prototype.separateFavorites=function(){return LPTools.getOption(this._buildOptions,"separateFavorites",!1)},Container.prototype.subscribe=function(t,e){var o=Topics.get(t);this._subscriptions.push({topic:o,callback:e}),o.subscribe(e)},Container.prototype.addFavorite=function(t){if(this.favoritesGroup){for(var e=this.favoritesGroup.getItemModelChildren(),o=0,i=e.length;o<i;++o)if(e[o]===t)return;this.favoritesGroup.addChild(t.newDisplayObject())}},Container.prototype.checkFavoriteWithNoFolder=function(t){if(bg.get("g_nofolder_feature_enabled")&&this.favoritesGroup&&(!this.favoriteSeparatorSwithedOn&&t&&(this.favoriteSeparatorSwithedOn=!0,$(".folderContainer.nofolder")&&$(".folderContainer.nofolder").addClass("withFavourites")),this.favoriteSeparatorSwithedOn&&!t)){this.favoritesGroup.getItemModelChildren().length||(this.favoriteSeparatorSwithedOn=!1,$(".folderContainer.nofolder")&&$(".folderContainer.nofolder").removeClass("withFavourites"))}},GridListContainer=function(t,e){Container.call(this,t,e),function(t){t.subscribe(Topics.DISPLAY_GRID,function(){t.displayAsGrid()}),t.subscribe(Topics.DISPLAY_LIST,function(){t.displayAsList()})}(this)},GridListContainer.prototype=Object.create(Container.prototype),GridListContainer.prototype.constructor=GridListContainer,IdentityContainer=function(t,e){Container.call(this,t,e)},IdentityContainer.prototype=Object.create(Container.prototype),IdentityContainer.prototype.constructor=IdentityContainer,function(){var t=function(t,e,o){return t instanceof AllIdentityDisplay?-1:e instanceof AllIdentityDisplay?1:o(t,e)};IdentityContainer.prototype.sortByNameAsc=function(e,o){return t(e,o,VaultItemBaseDisplay.prototype.sortByNameAsc)},IdentityContainer.prototype.sortByNameDesc=function(e,o){return t(e,o,VaultItemBaseDisplay.prototype.sortByNameDesc)}}(),DummyGroupDisplay=function(t,e){GroupDisplay.call(this,t,e)},DummyGroupDisplay.prototype=Object.create(GroupDisplay.prototype),DummyGroupDisplay.prototype.constructor=DummyGroupDisplay,DummyGroupDisplay.prototype.removeChild=function(){if(GroupDisplay.prototype.removeChild.apply(this,arguments),this.isEmpty()){for(var t=this;t._parent&&t._parent instanceof DummyGroupDisplay&&t._parent.isEmpty();)t=t._parent;t.destruct()}},DefaultGroupDisplay=function(t,e){GroupDisplay.call(this,t,e)},DefaultGroupDisplay.prototype=Object.create(GroupDisplay.prototype),DefaultGroupDisplay.prototype.constructor=DefaultGroupDisplay,DefaultGroupDisplay.prototype.getContextMenuItems=function(){return[new LPTools.ContextMenuItem(Constants.ACTION_OPEN_ALL)]},DefaultGroupDisplay.prototype.addChild=function(){var t=this.isEmpty();GroupDisplay.prototype.addChild.apply(this,arguments),t&&this.show()},DefaultGroupDisplay.prototype.removeChild=function(){GroupDisplay.prototype.removeChild.apply(this,arguments),this.isEmpty()&&this.hide()},FavoritesGroup=function(t){DefaultGroupDisplay.call(this,new DummyGroup(Strings.translateString("Favoritesproper")),t)},FavoritesGroup.prototype=Object.create(DefaultGroupDisplay.prototype),FavoritesGroup.prototype.constructor=FavoritesGroup,FavoritesGroup.prototype.removeChild=function(){DefaultGroupDisplay.prototype.removeChild.apply(this,arguments);var t=this.getContainer();t&&t.checkFavoriteWithNoFolder(!1)},ChangePasswordSite=function(t){VaultItemBaseDisplay.call(this,t)},ChangePasswordSite.prototype=Object.create(VaultItemBaseDisplay.prototype),ChangePasswordSite.prototype.constructor=ChangePasswordSite,ChangePasswordSite.prototype.build=function(t){var e=LPTools.buildCheckbox({vaultaction:Constants.ACTION_TOGGLE_SELECT},{text:this.getDisplayName()+": "+this._model.getUsername(),addClickHandler:!1});return e.setAttribute("class","checkboxContainer"),e},SharedFolderAccessCheckbox=function(t){VaultItemBaseDisplay.call(this,t)},SharedFolderAccessCheckbox.prototype=Object.create(VaultItemBaseDisplay.prototype),SharedFolderAccessCheckbox.prototype.constructor=SharedFolderAccessCheckbox,SharedFolderAccessCheckbox.prototype.build=function(t){var e=LPTools.buildCheckbox({vaultaction:Constants.ACTION_TOGGLE_SELECT},{text:this.getDisplayName(),addClickHandler:!1});return e.setAttribute("class","checkboxContainer"),e},function(t,e,o,i){var s=function(t,e){return o.getAttribute(t._element,e,"allowMultiple")},n=function(t){for(var e=[],o={},i=0,s=t.length;i<s;++i){var n=t[i]._model,r=n.getID();if(void 0===o[r])e.push(n),o[r]=n;else{for(var a=!0,l=0,p=e.length;l<p;++l)if(n===e[l]){a=!1;break}a&&e.push(n)}}return e};!function(){VaultItemBaseDisplay.prototype.DISPLAY_GRID="tile",VaultItemBaseDisplay.prototype.DISPLAY_LIST="list",VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS={COMPACT:!1},VaultItemBaseDisplay.prototype.COMPACT_CLASS="compact",Topics.get(Topics.DISPLAY_COMPACT).subscribe(function(){VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS.COMPACT=!0}),Topics.get(Topics.DISPLAY_LARGE).subscribe(function(){VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS.COMPACT=!1}),VaultItemBaseDisplay.prototype.lockForUpdate=function(){this._isLocked||(this._$_element&&(this.deselect(),this._$_element.addClass("locked"),this._$_element.attr("draggable","false"),this._lockedOverlay||(this._lockedOverlay=o.createElement("div","itemLocked")),this._element.appendChild(this._lockedOverlay)),this._isLocked=!0)},VaultItemBaseDisplay.prototype.unlock=function(){this._isLocked&&(this._$_element&&(this._$_element.removeClass("locked"),this._$_element.attr("draggable",this.isDraggable().toString()),this._element.removeChild(this._lockedOverlay)),this._isLocked=!1)},VaultItemBaseDisplay.prototype.isDeleted=function(){return!1},VaultItemBaseDisplay.prototype.getElement=function(){return this._$_element},VaultItemBaseDisplay.prototype.getContextMenuItems=function(t){return[]},VaultItemBaseDisplay.prototype.createContextMenuHandler=function(t){return function(e){return t?(t.action="sitepassword",t.source="vault"):t={action:"sitepassword",source:"vault"},function(o){Topics.get(Topics.CONTEXT_CLOSE).publish(),e.handleEvent(o,t)}}(this)},VaultItemBaseDisplay.prototype.handleContextMenu=function(t){var e=this.createContextMenu();Topics.get(Topics.CONTEXT_MENU).publish(t,e)},VaultItemBaseDisplay.prototype.createContextMenu=function(){var i=this.getItemsForAction(),s=this._selected&&this.getSelectedItems().length>1,n=this.isDeleted()||this._model.isDeleted()?this.getDeletedContextMenuItems(s):this.getContextMenuItems(s),r=e.getElementById("contextMenu"),a=r.children[0];t(a).empty();for(var l={},p=0,u=n.length;p<u;++p){var h=n[p],c=h.getAction();if(!0!==l[c])for(var d=0,y=i.length;d<y;++d)if(i[d].isExcludedAction(c)){l[c]=!0;break}!0!==l[c]&&h.build(a,this._contextMenuHandler,this._eventHandler)}return o.addKeyBoardNavigation(a.children),r},VaultItemBaseDisplay.prototype.getDeletedContextMenuItems=function(t){var e=[];return e.push(new o.ContextMenuItem(Constants.ACTION_RESTORE)),e.push(new o.ContextMenuItem(Constants.ACTION_PURGE)),e},VaultItemBaseDisplay.prototype.isExcludedAction=function(t,e){e=e||this.getBuildOptions();var i=o.getOption(e,"excludeActions",{}),s=i[t];return void 0===s&&(s=!1),s},VaultItemBaseDisplay.prototype.getDeletedItemButtonActions=function(){return[Constants.ACTION_RESTORE,Constants.ACTION_PURGE]},VaultItemBaseDisplay.prototype.getItemButtonActions=function(){return[]},VaultItemBaseDisplay.prototype.handleEvent=function(e,o){try{switch(e.type){default:if(!this._isLocked){var i=this.getVaultAction(e.target);i&&this.handleClickEvent(i,t.extend({shiftKey:e.shiftKey,allowMultiple:s(this,e.target)||!0,target:e.target},o))}e.preventDefault(),e.stopPropagation();break;case"contextmenu":this._isLocked||this.handleContextMenu(e),this._element.blur(),e.preventDefault(),e.stopPropagation();break;case"dragenter":this.handleDragEnter(e);break;case"dragleave":this.handleDragLeave(e);break;case"dragover":this.handleDragOver(e);break;case"drop":this.handleDrop(e);break;case"dragstart":this.handleDragStart(e);break;case"dragend":this.handleDragEnd(e);break;case"keydown":this.handleKeyDown(e);break;case"focusin":this.handleFocusIn(e);break;case"focusout":this.handleFocusOut(e)}}catch(t){LPPlatform.logException(t)}},VaultItemBaseDisplay.prototype.getVaultAction=function(t){return o.getAttribute(this._element,t,"vaultaction")},VaultItemBaseDisplay.prototype.isOverride=function(){return!1},VaultItemBaseDisplay.prototype.handleClickEvent=function(t,e){if(this.isOverride(t)&&"function"==typeof this[t])this[t]();else{var o=bg.get("g_nofolder_feature_enabled");switch(t){case Constants.ACTION_TOGGLE_SELECT:this.handleToggleSelectedEvent(e.shiftKey);break;case Constants.ACTION_OPEN_MORE_OPTIONS:this.openMoreOptions();break;case Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU:this.openMoveToFolderMenu(e.target,o?this.getAllOtherGroupsWithSubItems(!0):this.getOtherGroups(!0));break;case Constants.ACTION_EDIT:e.dialogActions=this.getDialogActions();default:e.itemsForAction=this.getModelItemsForAction(t,e),this._model.handleClickEvent(t,e)}}},VaultItemBaseDisplay.prototype.getDialogActions=function(){for(var t=[],e=this.getItemButtonActions(),o=0,i=e.length;o<i;++o)this.isExcludedAction(e[o])||t.push(e[o]);return t},VaultItemBaseDisplay.prototype.handleEnter=function(t){if(t.target===this._element){var e=this.getLaunchElementAction();e&&this.handleClickEvent(e,{})}},VaultItemBaseDisplay.prototype.handleFocusIn=function(){this._focused=!0,this._$_element.addClass("focus")};var r=null;Topics.get(Topics.DIALOG_OPEN).subscribe(function(){clearTimeout(r)}),VaultItemBaseDisplay.prototype.handleFocusOut=function(){this._focused=!1,function(t){r=setTimeout(function(){!t._focused&&t._$_element&&t._$_element.removeClass("focus")},50)}(this)},VaultItemBaseDisplay.prototype.focus=function(){this._element.focus()},VaultItemBaseDisplay.prototype.handleKeyDown=function(t,e){switch(t.keyCode||t.which){case 13:this.handleEnter(t);break;case 37:this.navigateBackward();break;case 38:this.navigateUp();break;case 39:this.navigateForward();break;case 40:this.navigateDown()}},VaultItemBaseDisplay.prototype.navigateForward=function(){this.navigate(1)},VaultItemBaseDisplay.prototype.navigateBackward=function(){this.navigate(-1)},VaultItemBaseDisplay.prototype.navigateUp=function(){this.navigateVerticalTile(-1)},VaultItemBaseDisplay.prototype.navigate=function(t){var e=this.getContainer();if(e)for(var o=e.getAllChildrenOrdered(),i=0,s=o.length;i<s;++i)if(o[i]===this){var n=i+t;n<0?n=0:n>s-1&&(n=s-1),o[n].focus()}},VaultItemBaseDisplay.prototype.navigateVerticalTile=function(){var t=function(t,e,o,i){var s=t._$_element.offset();return e>0&&s.top>i||e<0&&s.top<i||(e>0&&s.left>o.left||e<0&&s.left<o.left)};return function(e){var o=this.getContainer();if(o){for(var i=-1,s=o.getAllChildrenOrdered(),n=s.length,r=0;r<n;++r)if(s[r]===this){i=r;break}for(var a=this._$_element.offset(),l=a.top;i+e>-1&&i+e<n;){i+=e;var p=s[i]._$_element.offset();if(e>0&&p.top>l||e<0&&p.top<l){l=p.top;break}}if(!(s[i]instanceof GroupDisplay))for(;i+e>-1&&i+e<n&&!t(s[i+e],e,a,l);)i+=e;s[i].focus()}}}(),VaultItemBaseDisplay.prototype.navigateDown=function(){this.navigateVerticalTile(1)},VaultItemBaseDisplay.prototype.getModelItemsForAction=function(t,e){return n(this.getItemsForAction(e))},VaultItemBaseDisplay.prototype.deselect=function(t){if(this._selected){this._selected=!1,this._$_element.removeClass("selected");var e=this.getContainer();e&&e.removeSelectedItem(this,t)}},VaultItemBaseDisplay.prototype.select=function(t){if(!this._selected&&this._shown){this._selected=!0,this._$_element.addClass("selected");var e=this.getContainer();e&&e.addSelectedItems(this,t)}},VaultItemBaseDisplay.prototype.handleToggleSelectedEvent=function(t){this._selected?this.deselect(t):this.select(t);var e=this.getContainer();e&&(e._lastToggleSelectTarget=this)},VaultItemBaseDisplay.prototype.getItemsForAction=function(t){var e=[this];return!this._selected||t&&!t.allowMultiple||(e=this.getSelectedItems()),e};var a=function(t){if(t instanceof DefaultGroupDisplay||t instanceof DummyGroupDisplay){return t._model._data.group===Strings.Vault.NONE_GROUP||t._model._data.group===Strings.Consts.NONE_GROUP}return!1},l=function(t,e){var o={defultFolderFound:!1,returnValue:null};return bg.get("g_nofolder_feature_enabled")&&(a(t)?(o.defultFolderFound=!0,o.returnValue=-1):a(e)&&(o.defultFolderFound=!0,o.returnValue=1)),o};VaultItemBaseDisplay.prototype.getMoveOrganizeLPMenu=function(){return bg.get("g_nofolder_feature_enabled")?new o.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,{divider:!0,submenu:!0,text:bg.gs("Organize")}):new o.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,{divider:!0,submenu:!0})},VaultItemBaseDisplay.prototype.sortByNameAsc=function(t,e){var o=l(t,e);return o&&o.defultFolderFound?o.returnValue:VaultItemBase.prototype.sortByTextFunction(t,e,"getDisplayName",!0)},VaultItemBaseDisplay.prototype.sortByNameDesc=function(t,e){var o=l(t,e);return o&&o.defultFolderFound?o.returnValue:VaultItemBase.prototype.sortByTextFunction(t,e,"getDisplayName",!1)},VaultItemBaseDisplay.prototype.sortByMostRecent=function(t,e){return VaultItemBase.prototype.sortByFunction(t,e,"getLastTouchValue",!1)},VaultItemBaseDisplay.prototype.getLastTouchValue=function(){return this._model.getLastTouch()},VaultItemBaseDisplay.prototype.getSearchResultItems=function(t,e){return t.length>0&&!this.matches(t,e)?null:this},VaultItemBaseDisplay.prototype.applySearch=function(t,e){var o=this.matches(t,e);return t.length>0&&!o?(null!==o&&this.hide(),null):(this.show(),this.expandParents(!1),1)},VaultItemBaseDisplay.prototype.expandParents=function(){for(var t=this._parent;t;)t.expand(),t=t._parent},VaultItemBaseDisplay.prototype.matches=function(t,e){if(0===t.length)return!0;var i=this._model.getSearchTokens(e);if(i){for(var s=0;s<t.length;++s){for(var n=t[s].toLowerCase(),r=!1,a=0,l=i.length;a<l;++a){if(i[a].toLowerCase().indexOf(n)>-1){r=!0,o.getOption(e,"removeMatchingTerms",!1)&&(t.splice(s,1),--s);break}}if(!r)return!1}return!0}return null},VaultItemBaseDisplay.prototype.addViewToModel=function(){this._model&&this._model.addView(this)},VaultItemBaseDisplay.prototype.removeViewFromModel=function(){this._model&&this._model.removeView(this)},VaultItemBaseDisplay.prototype.createTextElement=function(t,i,s){var n=o.createElement(t,s),r=e.createTextNode(i.apply(this));return n.appendChild(r),this._textElements.push({element:r,data:i}),n},VaultItemBaseDisplay.prototype.setElement=function(e){e?(this._element=e,this._$_element=t(e)):(this._element=null,this._$_element=null)},VaultItemBaseDisplay.prototype.getScrollTop=function(){var t=this._element.offsetTop,e=this.getContainer(),o=this._parent!==e?this._parent.getLevel()+1:0;return o>0&&e&&e.usesStickyFolders()&&(t-=this._parent._$_element.find(".folderContainer").outerHeight(!0)*o),t},VaultItemBaseDisplay.prototype.updateTextElements=function(){if(this._textElements)for(var t=0,e=this._textElements.length;t<e;++t){var o=this._textElements[t];o.element.textContent=o.data.apply(this)}},VaultItemBaseDisplay.prototype.updateView=function(t,e){this.updateTextElements(),this.setAccesibilityAttributes();var o=this.getContainer();if(this._parent instanceof FavoritesGroup)this._model.isFavorite()||(this._parent.removeChild(this),o&&o.checkFavoriteWithNoFolder(!1));else if(o){var i=this._parent?this._parent._model:null;if(i!==t&&o.displayItemsInSpecifiedGroup()){var s=o;t&&((s=o.getGroupDisplay(t))||(s=o.addDummyGroups(t))),this._parent.removeChild(this),s.addChild(this,e)}this._model.isFavorite()&&(o.addFavorite(this._model),o.checkFavoriteWithNoFolder(!0))}},VaultItemBaseDisplay.prototype.reattachElement=function(){this._parent._itemContents.appendChild(this._element)},VaultItemBaseDisplay.prototype.addClass=function(t){o.addClass(this._element,t)},VaultItemBaseDisplay.prototype.setParent=function(t){this._parent=t},VaultItemBaseDisplay.prototype.show=function(){null!==this._element&&(this._$_element.LP_show(),null===this._element.parentElement&&this.reattachElement(),this._shown=!0)},VaultItemBaseDisplay.prototype.hide=function(){null!==this._$_element&&(this._$_element.LP_hide(),this.deselect(),this._shown=!1)};var p=function(t,e){if(null!==t){var o=t.getAttribute("class").split(" ");o[0]=e,t.setAttribute("class",o.join(" "))}};VaultItemBaseDisplay.prototype.displayAsList=function(){p(this._element,VaultItemBaseDisplay.prototype.DISPLAY_LIST)},VaultItemBaseDisplay.prototype.displayAsGrid=function(){p(this._element,VaultItemBaseDisplay.prototype.DISPLAY_GRID)},VaultItemBaseDisplay.prototype.setupListeners=function(t,e){t.bind("click",this._eventHandler),t.bind("contextmenu",this._eventHandler),e.keyboardNavigation&&(t.bind("keydown",this._eventHandler),t.bind("focusin",this._eventHandler),t.bind("focusout",this._eventHandler))},VaultItemBaseDisplay.prototype.shouldDragAndDrop=function(t){var e=o.getOption(t,"allowDrag",!0);return o.getOption(t,"forceDrag",!1)||e&&this.isDraggable()},VaultItemBaseDisplay.prototype.build=function(t){var e=t.display||this.getItemClass();this.DISPLAY_OPTIONS.COMPACT&&(e+=" "+this.COMPACT_CLASS);var i={class:e,vaultaction:Constants.ACTION_TOGGLE_SELECT,draggable:this.shouldDragAndDrop(t).toString()};t.keyboardNavigation&&(i.tabindex="0");var s=o.createElement("div",i);t.additionalItemClasses&&o.addClass(s,t.additionalItemClasses),t.minimized&&o.addClass(s,"minimized");var n=o.createElement("div",{class:"itemWrapper"});s.appendChild(n);var r=o.createElement("div","listCheckboxContainer");n.appendChild(r);var a=this.buildItemIconElement(t);a?n.appendChild(a):o.addClass(s,"noIcon");var l=o.createElement("div","itemInfo");n.appendChild(l);var p=o.createElement("div","itemInfoTable");l.appendChild(p);for(var u=this.buildItemInfoTextElements(t),h=0,c=u.length;h<c;++h){var d=u[h];0===h?c>1&&o.addClass(d,"first"):o.addClass(d,"showLarge"),p.appendChild(d)}for(var y=this.buildItemButtons(t),h=0,c=y.length;h<c;++h){var A=o.createElement("div","itemButtonCell");A.appendChild(y[h]),p.appendChild(A)}return s},VaultItemBaseDisplay.prototype.setAccesibilityAttributes=function(){this._element&&this._element.setAttribute("aria-label",this._model.toString())},VaultItemBaseDisplay.prototype.buildItemHoverInfo=function(){return null},VaultItemBaseDisplay.prototype.buildItemButtons=function(t){for(var e=[],i=this._model.isDeleted()?this.getDeletedItemButtonActions():this.getItemButtonActions(),s=0;s<i.length;++s){var n=i[s];this.isExcludedAction(n,t)||e.push(o.buildItemButton(n))}return e},VaultItemBaseDisplay.prototype.rebuild=function(){if(this._element&&this._element.parentElement){var t=this.getBuildOptions(),e=this.build(t);return this._element.parentElement.insertBefore(e,this._element),this._$_element.remove(),this.postBuild(e,t),!0}return!1},VaultItemBaseDisplay.prototype.getLaunchElementAction=function(){return null},VaultItemBaseDisplay.prototype.preBuild=function(e){var i=o.getOption(e,"override",null);if("function"==typeof i){var s=i.apply(this);t.extend(this,s)}},VaultItemBaseDisplay.prototype.postBuild=function(t,e){e=e||{},this.setElement(t),this.setupListeners(this._$_element,e),this.addViewToModel(),this.setAccesibilityAttributes()},VaultItemBaseDisplay.prototype.buildItemIconElement=function(){var t=o.createElement("div","itemIcon"),e=this.getIconElement();t.appendChild(e),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation");var i=o.createElement("div","itemIconOverlay");t.appendChild(i);var s=this._model.isDeleted()?null:this.getLaunchElementAction();if(null!==s&&!this.isExcludedAction(s)){var n=o.createElement("button",{class:"launchButton",vaultaction:s},Strings.Vault[Constants.ACTION_BUTTONS[s].title]);i.appendChild(n)}var r=o.createElement("button","itemCheckbox");return i.appendChild(r),t},VaultItemBaseDisplay.prototype.buildItemInfoTextElement=function(){var t=function(t){var e=null;if(t.length>0){e=o.createElement("div");for(var i=0,s=t.length;i<s;++i)e.appendChild(t[i])}return e};return function(e){for(var i=o.createElement("div","itemInfoText"),s=0,n=e.length;s<n;++s){var r=e[s];r instanceof Array&&(r=t(r)),r&&i.appendChild(r)}return i}}(),VaultItemBaseDisplay.prototype.getDisplayName=function(){return this._model.getName()},VaultItemBaseDisplay.prototype.createSecondaryNameTextElement=function(){return null},VaultItemBaseDisplay.prototype.buildItemInfoTextElements=function(){return[this.buildItemInfoTextElement([this.createTextElement("p",this.getDisplayName,"name"),this.createSecondaryNameTextElement()])]},VaultItemBaseDisplay.prototype.getItemClass=function(){return VaultItemBaseDisplay.prototype.DISPLAY_LIST},VaultItemBaseDisplay.prototype.isDraggable=function(){return!1},VaultItemBaseDisplay.prototype.getIconElement=function(){return null},VaultItemBaseDisplay.prototype.destruct=function(){if(!this._destructed){this._parent&&(this.deselect(),this._parent.removeChild(this),this._$_element&&this._$_element.remove()),this.removeViewFromModel();for(var t in this)this.hasOwnProperty(t)&&delete this[t];this._destructed=!0}},VaultItemBaseDisplay.prototype.showAllChildren=function(){return this.show(),1},VaultItemBaseDisplay.prototype.applyFilter=function(t){return void 0===t.func||t.func(this)?(this.show(),1):(this.hide(),0)},VaultItemBaseDisplay.prototype.collapseAll=function(){},VaultItemBaseDisplay.prototype.expandAll=function(){},VaultItemBaseDisplay.prototype.displayCompact=function(){this._$_element&&this._$_element.addClass(this.COMPACT_CLASS)},VaultItemBaseDisplay.prototype.displayLarge=function(){this._$_element&&this._$_element.removeClass(this.COMPACT_CLASS)},VaultItemBaseDisplay.prototype.openMoreOptions=function(){},VaultItemBaseDisplay.prototype.addFavorite=function(){},VaultItemBaseDisplay.prototype.getContainer=function(){for(var t=this;t._parent;)t=t._parent;return t instanceof Container?t:null},VaultItemBaseDisplay.prototype.getBuildOptions=function(){for(var e=[],o=this;o;)o._buildOptions&&e.unshift(o._buildOptions),o=o._parent;return e.unshift({}),t.extend.apply(window,e)},VaultItemBaseDisplay.prototype.getSelectedItems=function(){var t=[],e=this.getContainer();return e&&(t=e.getSelectedItems()),t},VaultItemBaseDisplay.prototype.usesStickyFolders=function(){var t=!1,e=this.getContainer();return e&&(t=e.usesStickyFolders()),t},VaultItemBaseDisplay.prototype.openMoveToFolderMenu=function(e,i){var s=t(e).closest(".subMenuOption").find(".subMenu");if(0===s.children().length){i.sort(VaultItemBaseDisplay.prototype.sortByNameAsc);for(var n=0,r=i.length;n<r;++n){var l=i[n];bg.get("g_nofolder_feature_enabled")&&a(l)&&(l._contextMenuElement.innerHTML=bg.gs(Strings.Vault.NO_FOLDER),l._contextMenuElement.innerText=bg.gs(Strings.Vault.NO_FOLDER));var p=t(l._contextMenuElement);p.unbind("click"),p.bind("click",this.createContextMenuHandler({group:l._model,scrollIntoView:!1})),s.append(p)}}s.show("fast"),o.addKeyBoardNavigation(s.children()),o.setNavIndex(0)},VaultItemBaseDisplay.prototype.getOtherGroups=function(t){var e=[],o=this.getContainer(),i=this._parent===o?this:this._parent;if(o)for(var s=o.getAllSubGroups(t),n=i.getAllSubGroups(t),r=0,a=s.length;r<a;++r)s[r]!==i&&(n.length>0&&n[0]===s[r]?r+=n.length-1:e.push(s[r]));return e},VaultItemBaseDisplay.prototype.getAllOtherGroupsWithSubItems=function(t){var e=[],o=this.getContainer(),s=this._parent===o?this:this._parent;if(o)for(var n=o.getAllSubGroups(t),r=0,l=n.length;r<l;++r)n[r]!==s&&e.push(n[r]);if(bg.get("g_nofolder_feature_enabled")){for(var p=!1,r=0;r<e.length;r++)if(a(e[r])){p=!0;break}if(!p&&this._parent._model._data.group!=Strings.Consts.NONE_GROUP&&this._parent._model._data.group!=Strings.Vault.NONE_GROUP){var u=i.getGroupByName(Strings.Consts.NONE_GROUP);u||(u=i.getGroupByName(Strings.Vault.NONE_GROUP)),u?u instanceof DummyGroup&&(u=u._views[0]):u=new DummyGroupDisplay(new DummyGroup(Strings.Consts.NONE_GROUP,null),null),e.push(u)}}return e},GroupDisplay.prototype.getAllOtherGroupsWithSubItems=function(t){var e=this.getOtherGroups(t);if(bg.get("g_nofolder_feature_enabled"))for(var o=0;o<e.length;o++)if(a(e[o])){e.splice(o,1);break}return e}}(),function(){var t=VaultItemBaseDisplay.prototype.DISPLAY_GRID;Topics.get(Topics.DISPLAY_GRID).subscribe(function(){t=VaultItemBaseDisplay.prototype.DISPLAY_GRID}),Topics.get(Topics.DISPLAY_LIST).subscribe(function(){t=VaultItemBaseDisplay.prototype.DISPLAY_LIST});var i=e.getElementById("dragElement");null===i&&(i=o.createElement("div",{id:"dragElement"}),e.body.appendChild(i)),VaultItemDisplay.prototype.navigateDown=function(){this.getItemClass()===this.DISPLAY_LIST?this.navigateForward():VaultItemBaseDisplay.prototype.navigateDown.apply(this,arguments)},VaultItemDisplay.prototype.navigateUp=function(){this.getItemClass()===this.DISPLAY_LIST?this.navigateBackward():VaultItemBaseDisplay.prototype.navigateUp.apply(this,arguments)},VaultItemDisplay.prototype.handleClickEvent=function(t,e){switch(t){case Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU:this.openMoveToFolderMenu(e.target,this.getAllSubGroups(!0));break;default:VaultItemBaseDisplay.prototype.handleClickEvent.apply(this,arguments)}},VaultItemDisplay.prototype.getItemClass=function(){return t},VaultItemDisplay.prototype.getAllSubGroups=function(){return this._parent.getAllSubGroups()},VaultItemDisplay.prototype.setupListeners=function(t,e){VaultItemBaseDisplay.prototype.setupListeners.apply(this,arguments),this.shouldDragAndDrop(e)&&(t=t.get(0),LPPlatform.addEventListener(t,"dragstart",this._eventHandler),LPPlatform.addEventListener(t,"dragend",this._eventHandler),e&&"function"==typeof e.dragstart&&LPPlatform.addEventListener(t,"dragstart",e.dragstart))},VaultItemDisplay.prototype.destruct=function(){if(!this._destructed){if(this._element){LPPlatform.removeEventListener(this._element,"dragstart",this._eventHandler),LPPlatform.removeEventListener(this._element,"dragend",this._eventHandler);var t=this.getContainer();t&&"function"==typeof t._buildOptions.dragstart&&LPPlatform.removeEventListener(this._element,"dragend",t._buildOptions.dragstart)}VaultItemBaseDisplay.prototype.destruct.apply(this,arguments)}},VaultItemDisplay.prototype.isDraggable=function(){return!0},VaultItemDisplay.prototype.getScrollTop=function(){var t=VaultItemBaseDisplay.prototype.getScrollTop.apply(this,arguments);return t-=parseInt(this._$_element.css("margin-top"))},VaultItemDisplay.prototype.handleDragStart=function(t){var e="function"==typeof t.dataTransfer.setDragImage;o.removeDOMChildren(i);var s=this.getItemsForAction();o.setDragItems(s);for(var n=[],r={},a=0,l=s.length,p=0;a<l;++a){var u=s[a];if(u._parent.setDragTarget(!1),e){if(p<5){var h=u._model,c=h.getID(),d=!0;if(void 0===r[c])n.push(h),r[c]=h;else for(var y=0,A=n.length;y<A;++y)if(h===n[y]){d=!1;break}d&&(i.appendChild(u.buildDragElement(p===l-1)),++p)}else 5===p&&i.appendChild(o.createElement("div","dragItem last","... +"+(l-a)+" more"))
;u._$_element.addClass("dragStarted")}}e&&(t.dataTransfer.setDragImage(i,-20,0),t.dataTransfer.setData("text/plain",""));var m=this.getContainer();m&&m.handleDragStart()},VaultItemDisplay.prototype.handleDragEnd=function(t){for(var e=o.getDragItems(),i=0,s=e.length;i<s;++i){var n=e[i];n._parent&&n._parent.setDragTarget(!0),n._$_element.removeClass("dragStarted")}var r=this.getContainer();r&&r.handleDragEnd()},VaultItemDisplay.prototype.buildDragElement=function(t){var e=o.createElement("div",{class:"dragItem"+(t?" last":"")}),i=o.createElement("div","dragIconContainer itemIcon"),s=this.getIconElement();s.setAttribute("class",s.getAttribute("class")+" dragIcon"),i.appendChild(s),e.appendChild(i);var n=o.createElement("div","dragName",this._model.getName());return e.appendChild(n),e}}(),function(){AccountBaseDisplay.prototype.convertTimeToString=function(){var t=function(t,e,o){return(t=Math.floor(t))+" "+(1===t?e:o)+" "+Strings.Vault.AGO};return function(e){if(void 0===e||e<31536e3)return Strings.Vault.NEVER;var i=o.get_gmt_timestamp()-e;return i<0?Strings.Vault.JUST_NOW:i<60?t(i,Strings.Vault.SECOND,Strings.Vault.SECONDS):i<3600?t(i/60,Strings.Vault.MINUTE,Strings.Vault.MINUTES):i<86400?t(i/60/60,Strings.Vault.HOUR,Strings.Vault.HOURS):i<604800?t(i/60/60/24,Strings.Vault.DAY,Strings.Vault.DAYS):i<2678400?t(i/60/60/24/7,Strings.Vault.WEEK,Strings.Vault.WEEKS):i<31536e3?t(i/60/60/24/31,Strings.Vault.WEEK,Strings.Vault.WEEKS):t(i/60/60/24/365,Strings.Vault.YEAR,Strings.Vault.YEARS)}}(),AccountBaseDisplay.prototype.getLastTouchString=function(){return this.convertTimeToString(this._model.getLastTouch())},AccountBaseDisplay.prototype.buildItemInfoTextElements=function(){var t=VaultItemDisplay.prototype.buildItemInfoTextElements.apply(this,arguments);return t.push(this.buildItemInfoTextElement([o.createElement("p","small infoLabel",Strings.Vault.LAST_USED),this.createTextElement("p",this.getLastTouchString,"small")])),t},AccountBaseDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return t||e.push(new o.ContextMenuItem(Constants.ACTION_EDIT)),e.push(new o.ContextMenuItem(Constants.ACTION_DELETE)),e.push(new o.ContextMenuItem(Constants.ACTION_SHARE)),t||e.push(new o.ContextMenuItem(Constants.ACTION_CLONE)),e.push(this.getMoveOrganizeLPMenu()),this._parent.hasSubGroup()&&!bg.get("g_nofolder_feature_enabled")&&e.push(new o.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU,{divider:!0,submenu:!0})),e},AccountBaseDisplay.prototype.getItemButtonActions=function(){var t=[Constants.ACTION_EDIT];return this._model.isSharingEnabled()&&t.push(Constants.ACTION_SHARE),t.push(Constants.ACTION_DELETE),t},AccountBaseDisplay.prototype.isExcludedAction=function(t,e){switch(t){case Constants.ACTION_COPY_USERNAME:case Constants.ACTION_COPY_PASSWORD:case Constants.ACTION_COPY_NOTE:case Constants.ACTION_COPY_URL:return!LPFeatures.allowClipboardCopy();case Constants.ACTION_SHARE:return!this._model.isSharingEnabled()||!LPFeatures.allowIndividualSharing();default:return VaultItemDisplay.prototype.isExcludedAction.apply(this,arguments)}}}(),function(){AccountDisplay.prototype.buildItemIconElement=function(){var t=AccountBaseDisplay.prototype.buildItemIconElement.apply(this,arguments);return this.bigImg||t.setAttribute("class",t.getAttribute("class")+" smallIcon"),t},AccountDisplay.prototype.getDisplayName=function(){if(this._model.hasGeneratedPassword()){var t=Strings.Vault.GENERATED_PREFIX+" ",e=this._model.getName();if(0===e.indexOf(t))return e.substring(t.length)}return AccountBaseDisplay.prototype.getDisplayName.apply(this,arguments)},AccountDisplay.prototype.getUsernameValue=function(){return this._model.getUsername()},AccountDisplay.prototype.createSecondaryNameTextElement=function(){if(this.getUsernameValue())return this.createTextElement("p",this.getUsernameValue,"small infoLabel");if(this._model.hasGeneratedPassword()){var t=o.createElement("p","small infoLabel",Strings.Vault.GENERATED);return t.insertBefore(o.createElement("i","badge warn small"),t.firstChild),t}},AccountDisplay.prototype.getIconElement=function(){var t=i.getImage(this),e="smallIcon";return this.bigImg&&(e="bigIcon"),void 0===t||null===t?t="data:image/gif;base64,R0lGODlhEAAQAIcAAAAAAExnf1BpgWR0iHZ6hHeBkX+GkYiOmpeaopucoaSlqqWmqrm9w7q+xL+/wry/xcXGyc3Oz9HS1NPU1tnZ2d/h4+Di5OLj5uPl5+Tk5OXm6O7u7+7v8O/w8e/w8vDw8fHx8vLy8/Pz8/Pz9PT09fX19fX29vb29vf39/f3+Pj4+Pj4+fn5+vr6+/v7/Pz8/P39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAAQABAAAAiQAAEIHEiw4MAFCBEmQCjBIIAFMiLK8CBjA4QIBiFu2Fgh4oYJDgpq5Chxw4KCCiqSlKigIAKVGyowYNDgAYGCB2BWsHABgwYDBQvA/CCiBAoVBQoOUNlBhAkVLV4MKCigIgenK1zAiCGgYICKIEhAhRExgFcZHEKcYEG27NkOI1K0aCvDLMEAePPqteuwr8CAADs=":0===t.indexOf("lps lp")&&(e+=" "+t,t="../images/clear_icon.gif"),o.createElement("img",{class:e,src:t})},AccountDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_LAUNCH},AccountDisplay.prototype.getContextMenuItems=function(t){var e=AccountBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return t||(e.push(new o.ContextMenuItem(Constants.ACTION_COPY_USERNAME,{divider:!0})),e.push(new o.ContextMenuItem(Constants.ACTION_COPY_PASSWORD)),e.push(new o.ContextMenuItem(Constants.ACTION_COPY_URL)),e.push(new o.ContextMenuItem(Constants.ACTION_GO_TO_URL,{divider:!0}))),e},AccountDisplay.prototype.isExcludedAction=function(t,e){switch(t){case Constants.ACTION_LAUNCH:case Constants.ACTION_GO_TO_URL:return!this._model.isURLLaunchable()||AccountBaseDisplay.prototype.isExcludedAction.apply(this,arguments);default:return AccountBaseDisplay.prototype.isExcludedAction.apply(this,arguments)}}}(),function(){ApplicationDisplay.prototype.getIconElement=AccountDisplay.prototype.getIconElement,ApplicationDisplay.prototype.getLaunchElementAction=function(){return LPFeatures.allowLaunchApplication()?Constants.ACTION_LAUNCH:null},ApplicationDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]},ApplicationDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemDisplay.prototype.getContextMenuItems.apply(this,arguments);return t||(e.push(new o.ContextMenuItem(Constants.ACTION_COPY_USERNAME)),e.push(new o.ContextMenuItem(Constants.ACTION_COPY_PASSWORD))),e.push(this.getMoveOrganizeLPMenu()),this._parent.hasSubGroup()&&!bg.get("g_nofolder_feature_enabled")&&e.push(new o.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU,{divider:!0,submenu:!0})),t?e.push(new o.ContextMenuItem(Constants.ACTION_DELETE,{divider:!0})):(e.push(new o.ContextMenuItem(Constants.ACTION_EDIT,{divider:!0})),e.push(new o.ContextMenuItem(Constants.ACTION_DELETE)),e.push(new o.ContextMenuItem(Constants.ACTION_CLONE))),e}}(),function(){GroupDisplay.prototype.handleEnter=function(){this.toggleOpen()},GroupDisplay.prototype.focus=function(){this._element.children[0].children[0].focus()},GroupDisplay.prototype.handleClickEvent=function(t,e){switch(t){case Constants.ACTION_OPEN_ALL:i.openAll(this.getItemModelChildren());break;case Constants.ACTION_TOGGLE_OPEN:this.toggleOpen();break;case Constants.ACTION_EXPAND_ALL:this.expandAll();break;case Constants.ACTION_COLLAPSE_ALL:this.collapseAll();break;default:VaultItemBaseDisplay.prototype.handleClickEvent.apply(this,arguments)}},GroupDisplay.prototype.getModelItemsForAction=function(t){switch(t){case Constants.ACTION_PURGE:case Constants.ACTION_RESTORE:return this.getItemModelChildren();case Constants.ACTION_SHARE:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0));case Constants.ACTION_DELETE:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0)).concat(this._model);case Constants.ACTION_MOVE_TO_FOLDER:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0));default:VaultItemBaseDisplay.prototype.getModelItemsForAction.apply(this,arguments)}},GroupDisplay.prototype.isDeleted=function(){return!0===this._deleted},GroupDisplay.prototype.setDeleted=function(){this._deleted=!0},GroupDisplay.prototype.updateTextElements=function(){VaultItemBaseDisplay.prototype.updateTextElements.apply(this,arguments),this._parent&&this._parent.updateTextElements.apply(this._parent,arguments)},GroupDisplay.prototype.updateView=function(){var t=this.getLevel();VaultItemDisplay.prototype.updateView.apply(this,arguments),this.getLevel()!==t&&this.rebuild()},GroupDisplay.prototype.isExcludedAction=function(t,e){switch(t){case Constants.ACTION_SHARE:return!LPFeatures.allowSharedFolders();default:return VaultItemBaseDisplay.prototype.isExcludedAction.apply(this,arguments)}},GroupDisplay.prototype.parseExcludeActions=function(){var t=o.getOption(this._buildOptions,"excludeActions",null);if(t){for(var e={},i=0,s=t.length;i<s;++i)e[t[i]]=!0;this._buildOptions.excludeActions=e}},GroupDisplay.prototype.isEmpty=function(t){return 0===this.getChildren(t).length},GroupDisplay.prototype.applyToChildren=function(t,e){for(var o=this.getChildren(e),i=0,s=o.length;i<s;++i){var n=o[i];this.applyToChild(t,n)}},GroupDisplay.prototype.applyToChild=function(t,e){switch(typeof t){case"string":e[t].apply(e);break;case"function":t.call(this,e)}},GroupDisplay.prototype.select=function(){this.applyToChildren("select")},GroupDisplay.prototype.destruct=function(){this._destructed||(this.applyToChildren(function(t){t.setParent(null),t.destruct()},!0),this._$_stickyFolder&&this._$_stickyFolder.remove(),VaultItemBaseDisplay.prototype.destruct.apply(this))},GroupDisplay.prototype.getLabel=function(){return this._model.getGroupName()+" ("+this._itemCount+")"},GroupDisplay.prototype.getNoFolderLabel=function(){return""},GroupDisplay.prototype.getItemCount=function(){return this._itemCount},GroupDisplay.prototype.displayAsList=function(){this._element&&this.applyToChildren("displayAsList",!0)},GroupDisplay.prototype.displayAsGrid=function(){this._element&&this.applyToChildren("displayAsGrid",!0)},GroupDisplay.prototype.buildItem=function(t,e,o){t.preBuild(e);var i=t.build(e);o&&o.appendChild(i),t.postBuild(i,e)},GroupDisplay.prototype.buildItems=function(t,e,o){o=o||this.getBuildOptions(),"function"==typeof o.sortFunction&&t.sort(o.sortFunction);for(var i=0,s=t.length;i<s;++i)this.buildItem(t[i],o,e);t.length>0&&t[t.length-1].addClass("last")},GroupDisplay.prototype.sortItems=function(t,e,i,s){if(t.sort(i),e){(void 0===s||s)&&o.removeDOMChildren(e);for(var n=0,r=t.length;n<r;++n){var a=t[n];a._$_element.removeClass("last"),e.appendChild(a._element)}t.length>0&&t[t.length-1].addClass("last")}return t},GroupDisplay.prototype.buildFolderElement=function(t){var e=this.getLevel(),i="folderContainer";e>0&&(i+=" tab"+e);var s=o.createElement("div",i),n={class:"folderLabel",vaultaction:Constants.ACTION_TOGGLE_OPEN};t.keyboardNavigation&&(n.tabindex="0");var r=this.createTextElement("div",this.getLabel,n);if(bg.get("g_nofolder_feature_enabled")){var a=this.getLabel.apply(this);(a.indexOf(Strings.Vault.NONE_GROUP)>-1||a.indexOf(Strings.Consts.NONE_GROUP)>-1)&&(r=this.createTextElement("div",this.getNoFolderLabel,{class:"fakefolderLabel"}),this._parent instanceof Container&&this._parent.favoriteSeparatorSwithedOn?s.setAttribute("class","folderContainer nofolder withFavourites"):s.setAttribute("class","folderContainer nofolder"))}return s.appendChild(r),s},GroupDisplay.prototype.build=function(t){t=t||{};var e="folder";this.DISPLAY_OPTIONS.COMPACT&&(e+=" "+this.COMPACT_CLASS);var i=o.createElement("div",e);i.appendChild(this.buildFolderElement(t)),void 0!==t.additionalGroupClasses&&o.addClass(i,t.additionalGroupClasses);var s=o.createElement("div","contents");return i.appendChild(s),this._itemContents=o.createElement("div","itemContents"),this._subFolderContents=o.createElement("div","subFolderContents"),s.appendChild(this._itemContents),s.appendChild(this._subFolderContents),this.buildItems(this.getSubGroups(),this._subFolderContents,t),this.buildItems(this.getItems(),this._itemContents,t),this.usesStickyFolders()&&this.buildStickyFolder(t),i},GroupDisplay.prototype.setElement=function(t){VaultItemBaseDisplay.prototype.setElement.apply(this,arguments),this.folderLabel=e(this._$_element).get(0)},GroupDisplay.prototype.setAccesibilityAttributes=function(){this.folderLabel&&(this.folderLabel.setAttribute("role","button"),this.folderLabel.setAttribute("aria-expanded","true"),this.folderLabel.setAttribute("aria-label",this._model.toString()))},GroupDisplay.prototype.preBuild=function(){VaultItemBaseDisplay.prototype.preBuild.apply(this,arguments),this._itemCount=this.getItemChildren().length},GroupDisplay.prototype.postBuild=function(){VaultItemBaseDisplay.prototype.postBuild.apply(this,arguments),this._contents=this._$_element.find(".contents").first(),this._expanded||(this.addCollapsedClasses(),this._contents.hide())},GroupDisplay.prototype.buildStickyFolder=function(e){this._stickyFolder=this.buildFolderElement(t.extend({},e,{keyboardNavigation:!1})),this._$_stickyFolder=t(this._stickyFolder),this._$_stickyFolder.addClass("stickyFolder"),this._$_stickyFolder.css("z-index",-this.getLevel()),this.setupListeners(this._$_stickyFolder,e)},GroupDisplay.prototype.getLabelHeight=function(){var t;return function(){return void 0===t&&(t=this._$_element.find(".folderContainer").outerHeight()),t}}(),GroupDisplay.prototype.getOffsetTop=function(){var t;return function(){return void 0===t&&(t=Math.min(0,parseInt(this._$_element.css("margin-top")))),this._element.offsetTop-t}}(),GroupDisplay.prototype.getOffsetBottom=function(){var t;return function(){return void 0===t&&(t=Math.max(0,parseInt(this._$_element.css("margin-bottom")))),this._element.offsetTop+this._element.clientHeight+t}}();var e=function(t){var e=null;return e=t.hasClass("folderContainer")?t:t.children(".folderContainer"),e.children(".folderLabel")};GroupDisplay.prototype.setupListeners=function(t,o){var i=e(t);i.bind("click",this._eventHandler),i.bind("contextmenu",this._eventHandler),o.keyboardNavigation&&i.bind("keydown",this._eventHandler),(void 0===o.allowDrop||o.allowDrop)&&(t.bind("dragover",this._eventHandler),t.bind("drop",this._eventHandler),t.bind("dragenter",this._eventHandler),t.bind("dragleave",this._eventHandler))},GroupDisplay.prototype.displayCompact=function(){VaultItemBaseDisplay.prototype.displayCompact.apply(this,arguments),this._element&&this.applyToChildren("displayCompact",!0)},GroupDisplay.prototype.displayLarge=function(){VaultItemBaseDisplay.prototype.displayLarge.apply(this,arguments),this._element&&this.applyToChildren("displayLarge",!0)},GroupDisplay.prototype.toggleOpen=function(){this._expanded?this.collapse():this.expand();var t=this.getContainer();t._buildOptions.folderStateChange&&t._buildOptions.folderStateChange(t)},GroupDisplay.prototype.removeCollapsedClasses=function(){this._$_element.removeClass("closed"),this.folderLabel.setAttribute("aria-expanded","true"),this._$_stickyFolder&&this._$_stickyFolder.removeClass("closed")},GroupDisplay.prototype.addCollapsedClasses=function(){this._contents.css("height",""),this._$_element.addClass("closed"),this.folderLabel.setAttribute("aria-expanded","false"),this._$_stickyFolder&&this._$_stickyFolder.addClass("closed")},GroupDisplay.prototype.expand=function(){this._expanded||(this._element&&(this.removeCollapsedClasses(),this._contents.slideDown(200)),this._expanded=!0)},GroupDisplay.prototype.expandAll=function(){this.expand(),this.applyToChildren("expandAll")},GroupDisplay.prototype.collapse=function(){if(this._expanded){if(bg.get("g_nofolder_feature_enabled")){var t=this._model&&this._model._data&&this._model._data.group;if(t===Strings.Vault.NONE_GROUP||t===Strings.Consts.NONE_GROUP)return}if(this._element){var e=this.getContainer();if(e&&this.usesStickyFolders()){var o=e.scrollParent;this.getOffsetTop()<o.scrollTop()&&o.scrollTop(this._element.offsetTop-this._stickyFolder.offsetTop)}this._contents.slideUp(200),this.addCollapsedClasses()}this._expanded=!1}},GroupDisplay.prototype.collapseAll=function(){this.collapse(),this.applyToChildren("collapseAll")},GroupDisplay.prototype.isExpanded=function(){return this._expanded},GroupDisplay.prototype.hasSubGroup=function(){return this.getSubGroups().length>0},GroupDisplay.prototype.getAllSubGroups=function(t){for(var e=this.getSubGroups(t),o=0,i=e.length;o<i;++o)e=e.concat(e[o].getAllSubGroups(t));return e},GroupDisplay.prototype.getAllSubGroupModels=function(t){return n(this.getAllSubGroups(t))},GroupDisplay.prototype.getAllSubGroupsOrdered=function(t){for(var e=[],o=this.getSubGroups(t),i=0,s=o.length;i<s;++i){var n=o[i];n._shown&&(e.push(n),e=e.concat(n.getAllSubGroupsOrdered(t)))}return e},GroupDisplay.prototype.reattachElement=function(){this._parent._subFolderContents.appendChild(this._element)},GroupDisplay.prototype.getSearchOptions=function(){return{searchNotes:i.getPreference("searchNotes",!0)}},GroupDisplay.prototype.parseSearchTerms=function(t){for(var e=t.trim().split(" "),o=[],i=0,s=e.length;i<s;++i)e[i].length>0&&o.push(e[i]);return o},GroupDisplay.prototype.applySearch=function(e,o){if(e instanceof Array||(e=this.parseSearchTerms(e)),o.moreSpecific&&!this._shown)return null;if(e=e.slice(),e.length>0&&VaultItemBaseDisplay.prototype.applySearch.call(this,e,t.extend({},o,{removeMatchingTerms:!0})))return this.showAllChildren(o.ignoreFilterOnSearch),this.expand(!1),this._itemCount;var i=!1,s=this.getChildren(o.ignoreFilterOnSearch);this._itemCount=0;for(var n=0,r=s.length;n<r;++n){var a=s[n].applySearch(e,o);null!==a&&(this._itemCount+=a,i=!0)}return e.length>0&&!i?this.hide():(this.show(),this.updateTextElements()),0===e.length&&this.applyFilter(this._filter,{shouldRecurse:!1,forceFilter:!0}),i?this._itemCount:null},GroupDisplay.prototype.getSearchResultItems=function(t,e){if(t.length>0&&this.matches(t,e))return this.getItemChildren();for(var o=this.getChildren(e.ignoreFilterOnSearch),i=[],s=0,n=o.length;s<n;++s){var r=o[s].getSearchResultItems(t,e);null!==r&&(i=i.concat(r))}return i},GroupDisplay.prototype.handleDragEnter=function(t){if(this._dragTarget&&(this._$_element.toggleClass("dragTarget"),t.preventDefault(),this._$_element.hasClass("closed"))){var e=this;this._openTimeouts.push(setTimeout(function(){e.expand()},500))}t.stopPropagation()},GroupDisplay.prototype.setDragTarget=function(t){this._dragTarget=t},GroupDisplay.prototype.handleDragLeave=function(t){if(this._dragTarget){this._$_element.toggleClass("dragTarget"),t.preventDefault();var e=this._openTimeouts.pop();void 0!==e&&clearTimeout(e)}t.stopPropagation()},GroupDisplay.prototype.handleDragOver=function(t){this._dragTarget&&t.preventDefault(),t.stopPropagation()},GroupDisplay.prototype.handleDrop=function(t){if(this._dragTarget){this._$_element.removeClass("dragTarget");for(var e=o.getDragItems(),i=0,s=e.length;i<s;++i){e[i]._parent.setDragTarget(!0)}this.moveToFolder(n(e)),t.preventDefault(),t.stopPropagation()}},GroupDisplay.prototype.moveToFolder=function(t){t.length>0&&t[0].moveToFolder(this._model,t)};var s=function(t,e){for(var o=0,i=e.length;o<i;++o)if(t===e[o])return e.splice(o,1),!0};GroupDisplay.prototype.removeChild=function(t){var e=this._filter&&!1===this._filter.showEmptyGroups&&!this.isEmpty();if(s(t,this._items)?(this.updateItemCount(-1),this._filteredItems=null):(s(t,this._subGroups),this.updateItemCount(-t._itemCount),this._filteredSubGroups=null),t.setParent(null),t._element&&t._element.parentElement&&t._element.parentElement.removeChild(t._element),Topics.get(Topics.REAPPLY_SEARCH).publish(this,this.getSearchOptions()),e&&this.isEmpty()){var o=this.getContainer();o&&o.checkForStateChange(function(t){return function(){t.applyFilterToParents()}}(this))}this.updateTextElements()},GroupDisplay.prototype.getLevel=function(){for(var t=0,e=this._parent;e._parent;)++t,e=e._parent;return t},GroupDisplay.prototype.updateItemCount=function(t){this._itemCount+=t,this._parent&&this._parent.updateItemCount(t)},GroupDisplay.prototype.addChild=function(t,e){t instanceof Array||(t=[t]);for(var i=this.getContainer(),s=this.getBuildOptions(),n=[],r=[],a=0,l=t.length;a<l;++a){var p=t[a];p._parent!==this&&(p._parent&&p._parent.removeChild(p),p instanceof GroupDisplay?(this.updateItemCount(p._itemCount),this._subGroups.push(p),this._filteredSubGroups=null,n.push(p)):(this.updateItemCount(1),this._items.push(p),this._filteredItems=null,r.push(p)),p.setParent(this),null!==this._element&&null===p._element&&this.buildItem(p,s))}s&&(r.length>0&&this.sortItems(this.getItems(!0),this._itemContents,s.sortFunction),n.length>0&&this.sortItems(this.getSubGroups(!0),this._subFolderContents,s.sortFunction,this._subFolderContents!==this._itemContents)),this._filter&&i?i.checkForStateChange(function(t){return function(){t.applyFilterToParents()}}(this)):this._shown||this.show(),this.updateTextElements(),o.getOption(e,"scrollIntoView",!0)&&i&&i.scrollParent&&(1===r.length?i.scrollParent.scrollTop(t[0].getScrollTop()):r.length>1&&i.scrollParent.scrollTop(this.getScrollTop()))},GroupDisplay.prototype.applyFilterToParents=function(){for(var t=this;t;)t.applyFilter(t._filter,{shouldRecurse:!1,forceFilter:!0}),t=t._parent},GroupDisplay.prototype.sortChildren=function(t){var e=this.getSubGroups(!0);this.sortItems(e,this._subFolderContents,t),this.sortItems(this.getItems(!0),this._itemContents,t,this._subFolderContents!==this._itemContents),this.getSubGroups().sort(t),this.getItems().sort(t);for(var o=0,i=e.length;o<i;++o)e[o].sortChildren(t)},GroupDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return e.push(new o.ContextMenuItem(Constants.ACTION_RENAME)),this._model.isSharingEnabled()&&e.push(new o.ContextMenuItem(Constants.ACTION_SHARE)),e.push(new o.ContextMenuItem(Constants.ACTION_DELETE,{text:Strings.Vault.DELETE_FOLDER})),e.push(this.getMoveOrganizeLPMenu()),e.push(new o.ContextMenuItem(Constants.ACTION_CREATE_SUB_FOLDER)),e.push(new o.ContextMenuItem(Constants.ACTION_OPEN_ALL,{divider:!0})),e},GroupDisplay.prototype.getChildren=function(t){return this.getItems(t).concat(this.getSubGroups(t))},GroupDisplay.prototype.getAllChildrenOrdered=function(){var t=function(t){for(var e=this.getItems(t),o=[],i=0,s=e.length;i<s;++i)e[i]._shown&&o.push(e[i]);return o},e=function(t){for(var e=this.getSubGroups(t),o=[],i=0,s=e.length;i<s;++i){var n=e[i];n._shown&&(o.push(n),n._expanded&&(o=o.concat(n.getAllChildrenOrdered())))}return o};return function(o,i){return t.call(this,o).concat(e.call(this,o))}}(),GroupDisplay.prototype.getChildrenIncludingFavorites=GroupDisplay.prototype.getChildren,GroupDisplay.prototype.applyFilter=function(t,e){var i=o.getOption(e,"forceFilter",!1);if(t&&(null===this._filter||this._filter!==t||i)){var s=o.getOption(e,"shouldRecurse",!0),n=o.getOption(e,"recursed",!1),r=this instanceof Container||void 0===t.func||t.func(this);if(s||!n){e=e||{},e.recursed=!0;for(var a=this.getChildren(!0),l=0,p=0,u=a.length;p<u;++p)l+=a[p].applyFilter(t,e);this._itemCount=l,this.updateTextElements()}(this._filter!==t||i)&&(this._filter=t,this._filteredItems=null,this._filteredItems=this.getItems(),this._filteredSubGroups=null,this._filteredSubGroups=this.getSubGroups()),0===this._itemCount&&!t.showEmptyGroups||!r?this.hide():this.show()}return this._itemCount};var r=function(t){this._itemCount+=t.showAllChildren()};GroupDisplay.prototype.showAllChildren=function(t){return this._itemCount=0,this.applyToChildren(r,t),this.updateTextElements(),this._itemCount},GroupDisplay.prototype.getItemModelChildren=function(t){return n(this.getItemChildren(t))},GroupDisplay.prototype.getItemChildren=function(t){for(var e=this.getItems(t),o=this.getSubGroups(t),i=0,s=o.length;i<s;++i)e=e.concat(o[i].getItemChildren(t));return e},GroupDisplay.prototype.getItems=function(t){if(null===this._filter||t)return this._items;if(null!==this._filteredItems)return this._filteredItems;this._filteredItems=[];for(var e=0,o=this._items.length;e<o;++e){var i=this._items[e];(void 0===this._filter.func||this._filter.func(i))&&this._filteredItems.push(i)}return this._filteredItems},GroupDisplay.prototype.getSubGroupModels=function(t){return n(this.getSubGroups(t))},GroupDisplay.prototype.getSubGroups=function(t){if(null===this._filter||t)return this._subGroups;if(null!==this._filteredSubGroups)return this._filteredSubGroups;this._filteredSubGroups=[];for(var e=0,o=this._subGroups.length;e<o;++e){var i=this._subGroups[e];(void 0===this._filter.func||this._filter.func(i))&&(i._itemCount>0||this._filter.showEmptyGroups)&&this._filteredSubGroups.push(i)}return this._filteredSubGroups},GroupDisplay.prototype.show=function(){VaultItemBaseDisplay.prototype.show.apply(this,arguments),this._parent&&this._parent.show()},GroupDisplay.prototype.processItems=function(t,e){if(t instanceof Array)for(var o=0,i=t.length;o<i;++o)e.call(this,t[o]);else e.call(this,t)},function(){Container.prototype.initialize=function(e,i){null===this._element&&(this.setElement(e),this.scrollParent=i,this.favoritesGroup&&(this._favoriteElement=o.createElement("div"),e.appendChild(this._favoriteElement),this.buildItems([this.favoritesGroup],this._favoriteElement,this.favoritesGroup.getBuildOptions()),this.favoritesGroup.isEmpty()?this.favoritesGroup.hide():this.checkFavoriteWithNoFolder(!0)),o.getOption(this._buildOptions,"separateItems",!1)?(this._itemContents=o.createElement("div","itemContentPadding itemContents"),this._subFolderContents=o.createElement("div","folderWrapper"),e.appendChild(this._itemContents),e.appendChild(this._subFolderContents)):(this._itemContents=e,this._subFolderContents=e),this.buildItems(this.getSubGroups(),this._subFolderContents,this._buildOptions),this.buildItems(this.getItems(),this._itemContents,this._buildOptions),this._folderView||this.sortItemsNoFolder(this._buildOptions.sortFunction),this.usesStickyFolders()&&(this.updatedStickyFolderContainer=!1,this.stickyFoldersContainer=o.createElement("div","stickyFoldersContainer folder"),this.$stickyFoldersContainer=t(this.stickyFoldersContainer),this._buildOptions.stickyFolderParent.insertBefore(this.stickyFoldersContainer,this._buildOptions.stickyFolderParent.firstElementChild),function(t){var e=!1;t.scrollHandler=function(o){t._$_element.is(":visible")&&t._folderView&&("function"==typeof requestAnimationFrame?e||(requestAnimationFrame(function(i){i>0&&t.updateStickyFolders(o.target.scrollTop),e=!1}),e=!0):t.updateStickyFolders(o.target.scrollTop))},t.scrollParent.scroll(t.scrollHandler)}(this)))},Container.prototype.displayItemsInSpecifiedGroup=function(){return!0},Container.prototype.getScrollTop=function(){return 0},Container.prototype.usesStickyFolders=function(){return o.getOption(this._buildOptions,"stickyFolders",!1)},Container.prototype.updateStickyFolders=function(t){if(null!==this._$_element){this.updatedStickyFolderContainer||(this.$stickyFoldersContainer.css("right",this.scrollParent.width()-this._$_element.width()),this.updatedStickyFolderContainer=!0);var e=[];o.removeDOMChildren(this.stickyFoldersContainer);for(var i=this.getAllSubGroupsOrdered(),s=0,n=i.length;s<n;++s){var r=i[s],a=!1,l=r.getOffsetTop()-t;if(l<0&&r.getOffsetBottom()>t)a=!0;else if(l>=0){var p=e.length*r.getLabelHeight();if(!(l<p))break;var u=r.getLevel(),h=e[u];if(h){if(!(u>0&&p-l>(e.length-u)*r.getLabelHeight())){h.css("margin-top",Math.min(0,l-p));break}e=e.slice(0,u),a=!0}else a=!0}a&&(r._$_stickyFolder.css("margin-top",""),e[r.getLevel()]=r._$_stickyFolder)}this.$stickyFoldersContainer.append(e)}},Container.prototype.updateView=function(){},Container.prototype.matches=function(t,e){return null},Container.prototype.getChildrenIncludingFavorites=function(t){var e=GroupDisplay.prototype.getChildrenIncludingFavorites.apply(this,arguments);return this.favoritesGroup&&e.unshift(this.favoritesGroup),e},Container.prototype.getAllSubGroupsIncludingFavorites=function(t){var e=this.getAllSubGroups(t);return this.favoritesGroup&&(e=e.concat(this.favoritesGroup)),e},GroupDisplay.prototype.getSortedItems=function(t){if(null===this._filter||t)return this._sortedItems;if(null!==this._sortedFilteredItems)return this._sortedFilteredItems;this._sortedFilteredItems=[];for(var e=0,o=this._sortedItems.length;e<o;++e){var i=this._sortedItems[e];(void 0===this._filter.func||this._filter.func(i))&&this._sortedFilteredItems.push(i)}return this._sortedFilteredItems},Container.prototype.applyFilter=function(t,e){o.getOption(e,"checkForStateChange",!0)?this.checkForStateChange(GroupDisplay.prototype.applyFilter,arguments):GroupDisplay.prototype.applyFilter.apply(this,arguments),this._buildOptions.multiSelect=o.getOption(t,"multiSelect",!0),this.favoritesGroup&&this.favoritesGroup.applyFilter(t,e)},Container.prototype.applyToChildren=function(t,e){GroupDisplay.prototype.applyToChildren.apply(this,arguments),this.favoritesGroup&&this.applyToChild(t,this.favoritesGroup)},Container.prototype.getSearchResultItems=function(e,o){var i=GroupDisplay.prototype.getSearchResultItems.call(this,this.parseSearchTerms(e),t.extend(o,this.getSearchOptions(e)));return i.sort(VaultItemBaseDisplay.prototype.sortByNameAsc),i},Container.prototype.getSearchOptions=function(t){var e=GroupDisplay.prototype.getSearchOptions.apply(this,arguments);e.ignoreFilterOnSearch=this._buildOptions.ignoreFilterOnSearch;var o=!1;return this._lastSearchTerm&&t&&t.length>this._lastSearchTerm.length&&(o=t.split(" ").length===this._lastSearchTerm.split(" ").length),e.moreSpecific=o,e},Container.prototype.shouldSearch=function(t){return null===this._lastSearchTerm?t.length>0:this._lastSearchTerm!==t},Container.prototype.applySearch=function(e,o){if(e=e.trim(),this.shouldSearch(e)){o=t.extend(o,this.getSearchOptions(e)),this._lastSearchTerm=e;var i=this.parseSearchTerms(e);this._$_element.hide();var s=GroupDisplay.prototype.applySearch.call(this,i,o);return this._element.removeAttribute("style"),this.favoritesGroup&&this.favoritesGroup.applySearch(i,o),s}},Container.prototype.hide=function(){o.removeDOMChildren(this.stickyFoldersContainer)},Container.prototype.show=function(){},Container.prototype.checkForStateChange=function(t,e){if("function"==typeof this._buildOptions.stateChangeCallback){var o=this.isEmpty();t.apply(this,e),o!==this.isEmpty()&&this._buildOptions.stateChangeCallback(!o,this)}else t.apply(this,e)},Container.prototype.getGroupDisplay=function(t){for(var e=this.getAllSubGroups(),o=0,i=e.length;o<i;++o)if(e[o]._model===t)return e[o];return null};var e=function(t){for(var e=[],o=0,i=t.length;o<i;++o)e.push(t[o].newDisplayObject());return e};Container.prototype.addDummyGroups=function(t,o){var s=i.addDummyGroups(t);s.push(t);for(var n,r=s[0].getGroupParentName();!n&&r;){var a=i.getGroupByName(r);n=this.getGroupDisplay(a),n||s.unshift(a),r=a.getGroupParentName()}n||(n=this);for(var l=e(s),p=0,u=l.length-1;p<u;++p)l[p].addChild(l[p+1]);return GroupDisplay.prototype.addChild.call(n,l[0],o),l[l.length-1]},Container.prototype.removeChild=function(){this.checkForStateChange(GroupDisplay.prototype.removeChild,arguments)},Container.prototype.addChild=function(){var t=function(t){t._model.isFavorite()&&this.addFavorite(t._model)},e=function(e,o,i){if(o){var s=this.getGroupDisplay(o);s||(s=this.addDummyGroups(o,i)),s.addChild(e,i)
}else GroupDisplay.prototype.addChild.call(this,e,i);this.processItems(e,t)};return function(){this.checkForStateChange(e,arguments)}}(),Container.prototype.getSelectedItems=function(){return this._selectedItems.slice()},Container.prototype.getSelectedModelItems=function(){for(var t=[],e=0,o=this._selectedItems.length;e<o;++e)t.push(this._selectedItems[e]._model);return t},Container.prototype.removeSelectedItem=function(t,e){e&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==t&&(this.shiftSelect(t,this._lastToggleSelectTarget,"deselect"),this._lastToggleSelectTarget.deselect());for(var i=0,s=this._selectedItems.length;i<s;++i)if(t===this._selectedItems[i]){this._selectedItems.splice(i,1);break}var n=this._selectedItems.length;o.getOption(this._buildOptions,"publishSelect",!0)?(0===n&&Topics.get(Topics.ITEMS_DESELECTED).publish(),Topics.get(Topics.SELECT_COUNT_CHANGE).publish(n)):this.callSelectCallback(n)},Container.prototype.callSelectCallback=function(t){var e=o.getOption(this._buildOptions,"selectCallback",null);"function"==typeof e&&e(t)};var s=function(t,e,o){if(t.length>0)for(var i=t.pop(),n=i._parent,r=n.getChildrenIncludingFavorites(),a=0,l=r.length;a<l;++a){var p=r[a];p===i?(s(t,e,o),e=!e):e&&p[o].apply(p)}};Container.prototype.shiftSelectSimple=function(t,e,o){for(var i=null,s=this.getSortedItems(),n=0,r=s.length;n<r;++n){var a=s[n];if(a===t||a===e){if(null!==i)return;i=!0}else i&&a[o].apply(a)}},Container.prototype.shiftSelect=function(t,e,o){if(e){if(!this._folderView)return void this.shiftSelectSimple(t,e,o);for(var i=[t],n=[e];t._parent!==e._parent;)null!==t._parent&&(t=t._parent,i.push(t)),null!==e._parent&&(e=e._parent,n.push(e));for(;i.length>0&&n.length>0&&i[i.length-1]===n[n.length-1];)i.pop(),n.pop();for(var r=i.pop(),a=n.pop(),l=r._parent,p=!1,u=l.getChildrenIncludingFavorites(),h=0,c=u.length;h<c;++h){var d=u[h];d===r||d===a?(d===r?s(i,p,o):s(n,p,o),p=!p):p&&d[o].apply(d)}}},Container.prototype.addSelectedItems=function(t,e){var i=0===this._selectedItems.length,s=o.getOption(this._buildOptions,"multiSelect",!0);e&&s&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==t&&(this.shiftSelect(t,this._lastToggleSelectTarget,"select"),this._lastToggleSelectTarget.select()),this._selectedItems.push(t),!s&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==t&&this._lastToggleSelectTarget.deselect(),o.getOption(this._buildOptions,"publishSelect",!0)?(i&&Topics.get(Topics.ITEMS_SELECTED).publish(),Topics.get(Topics.SELECT_COUNT_CHANGE).publish(this._selectedItems.length)):this.callSelectCallback(this._selectedItems.length)},Container.prototype.pushSelectTarget=function(t){this._selectedStack.push(t)},Container.prototype.clearSelected=function(){if(this._selectedItems.length>0){o.getOption(this._buildOptions,"publishSelect",!0)?(Topics.get(Topics.ITEMS_DESELECTED).publish(),Topics.get(Topics.SELECT_COUNT_CHANGE).publish(0)):this.callSelectCallback(0);for(var t=this._selectedItems.slice(),e=0,i=t.length;e<i;++e)t[e].deselect()}this._selectedItems=[],this._lastToggleSelectTarget=null},Container.prototype.createSelectionContextMenu=function(){var t=this.getSelectedItems();return t.length>0?t[0].createContextMenu():null},Container.prototype.destruct=function(){if(!this._destructed){this.scrollHandler&&this.scrollParent.unbind("scroll",this.scrollHandler),this.searchInput&&this.searchInput.unbind("keydown.containerSearchNav"),this.clearSelected();for(var t=0,e=this._subscriptions.length;t<e;++t){var o=this._subscriptions[t];o.topic.unsubscribe(o.callback)}this._$_element&&this._$_element.empty(),this.$stickyFoldersContainer&&this.$stickyFoldersContainer.remove(),GroupDisplay.prototype.destruct.apply(this)}},Container.prototype.collapse=function(){},Container.prototype.open=function(){},Container.prototype.setFolderView=function(t){this._folderView=t,this._$_element&&(t?this._$_element.removeClass("itemView"):(this._$_element.addClass("itemView"),o.removeDOMChildren(this.stickyFoldersContainer)))},Container.prototype.sortByFolder=function(t){var e=t?this.sortByNameAsc:this.sortByNameDesc;(e!==this._buildOptions.sortFunction||o.getOption(this._filter,"hasFolderView",!0)&&!this._folderView)&&(this._buildOptions.sortFunction=e,this.setFolderView(!0),this.sortChildren(e),this._sortedItems=null),this.favoritesGroup&&this.favoritesGroup.show()},Container.prototype.sortByName=function(t){var e=t?this.sortByNameAsc:this.sortByNameDesc;(e!==this._buildOptions.sortFunction||o.getOption(this._filter,"hasFolderView",!0)&&this._folderView)&&this.sortItemsNoFolder(e)},Container.prototype.sortItemsByMostRecent=function(){(this._buildOptions.sortFunction!==this.sortByMostRecent||o.getOption(this._filter,"hasFolderView",!0)&&this._folderView)&&this.sortItemsNoFolder(this.sortByMostRecent)},Container.prototype.sortItemsNoFolder=function(t){this._buildOptions.sortFunction=t,this.setFolderView(!1),o.removeDOMChildren(this._subFolderContents),this._element&&(this._sortedItems=this.sortItems(this.getItemChildren(!0),this._itemContents,t)),this.favoritesGroup&&this.favoritesGroup.hide()},Container.prototype.handleDragStart=function(){this.$stickyFoldersContainer&&this.$stickyFoldersContainer.hide()},Container.prototype.handleDragEnd=function(){this.$stickyFoldersContainer&&this.$stickyFoldersContainer.show()},Container.prototype.getAllChildrenOrdered=function(){if(!this._folderView)return this.getSortedItems();var t=[];return this.favoritesGroup&&!this.favoritesGroup.isEmpty()&&this.favoritesGroup._shown&&(t.push(this.favoritesGroup),this.favoritesGroup._expanded&&(t=t.concat(this.favoritesGroup.getAllChildrenOrdered()))),t.concat(GroupDisplay.prototype.getAllChildrenOrdered.apply(this,arguments))},Container.prototype.getAllSubGroupsOrdered=function(){var t=GroupDisplay.prototype.getAllSubGroupsOrdered.apply(this,arguments);return this.favoritesGroup&&this.favoritesGroup._shown&&!this.favoritesGroup.isEmpty()&&t.unshift(this.favoritesGroup),t}}()}(),function(){SharedGroupDisplay.prototype.getSharedFolderLabel=function(){var t=[];return this._model.isReadOnly()&&t.push(Strings.Vault.READ_ONLY),t.push(Strings.Vault.SHARED_FOLDER),t.join(" "+String.fromCharCode(8226)+" ")},SharedGroupDisplay.prototype.buildFolderElement=function(t){var e=GroupDisplay.prototype.buildFolderElement.apply(this,arguments);return e.appendChild(this.createTextElement("div",this.getSharedFolderLabel,"sharedFolderLabel")),e},SharedGroupDisplay.prototype.getContextMenuItems=function(t){var e=GroupDisplay.prototype.getContextMenuItems.apply(this,arguments);return e.unshift(new o.ContextMenuItem(Constants.ACTION_STOP_DOWNLOADING)),e.unshift(new o.ContextMenuItem(Constants.ACTION_MANAGE)),e},SharedGroupDisplay.prototype.isExcludedAction=function(t,e){switch(t){case Constants.ACTION_CREATE_SUB_FOLDER:return this._model.isReadOnly();case Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU:return!0;default:return GroupDisplay.prototype.isExcludedAction.apply(this,arguments)}},SharedGroupDisplay.prototype.updateView=function(){if(this._model.isDeleted()||!this._model.isDownloaded())this.destruct();else{GroupDisplay.prototype.updateView.apply(this,arguments);for(var t=this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0)),e=0,o=t.length;e<o;++e){var i=t[e],s=i._data.group,n=s.indexOf("\\");i._data.group=this._model.getName()+(n>-1?s.substring(n):"")}}}}(),function(){LinkedGroupDisplay.prototype.getContextMenuItems=function(t){var e=[];return e.push(new o.ContextMenuItem(Constants.ACTION_UNLINK)),e.push(new o.ContextMenuItem(Constants.ACTION_CREATE_SUB_FOLDER)),e.push(new o.ContextMenuItem(Constants.ACTION_OPEN_ALL,{divider:!0})),e},LinkedGroupDisplay.prototype.getSharedFolderLabel=function(){return Strings.Vault.LINKED_PERSONAL_ACCOUNT}}(),function(){EmergencyAccessGroupDisplay.prototype.getSharedFolderLabel=function(){return Strings.Vault.EMERGENCY_ACCESS}}(),function(){FavoritesGroup.prototype.show=function(){this.isEmpty()||DefaultGroupDisplay.prototype.show.apply(this,arguments)},FavoritesGroup.prototype.moveToFolder=function(t){var e=this.getContainer();if(e&&t.length>0){var o=t[0];o.passwordProtect(function(){LPRequest.makeUpdateRequest(i.addToFavorites,{parameters:[t],success:function(){for(var i=0,s=t.length;i<s;++i)e.addFavorite(t[i]);o.publishSuccess(Strings.translateString("added to Favorites"),t.length)}})},{itemsForAction:t})}}}(),function(){var t=function(t,e){this.path=t,this.css=e};NoteDisplay.prototype.NOTE_TYPES={},NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.ADDRESS]=new t("","noteAddress"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.AMEX]=new t("images/vault_4.0/secureNoteIcons/Amex.png","noteAmex"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.BANK]=new t("images/vault_4.0/secureNoteIcons/Bank_Account.png","noteBank"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.CREDIT]=new t("images/vault_4.0/secureNoteIcons/Generic_Credit_Card.png","noteCredit"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.DATABASE]=new t("images/vault_4.0/secureNoteIcons/Database.png","noteDatabase"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.DRIVERS_LICENSE]=new t("images/vault_4.0/secureNoteIcons/Drivers_License.png","noteDriversLicense"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.EMAIL]=new t("images/vault_4.0/secureNoteIcons/Email.png","noteEmail"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.GENERIC]=new t("images/vault_4.0/secureNoteIcons/Generic_Note.png","noteGeneric"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.HEALTH_INSURANCE]=new t("images/vault_4.0/secureNoteIcons/Health_Insurance.png","noteHealthInsurance"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.IM]=new t("images/vault_4.0/secureNoteIcons/Instant_Messenger.png","noteIM"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.INSURANCE]=new t("images/vault_4.0/secureNoteIcons/Insurance.png","noteInsurance"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.MASTERCARD]=new t("images/vault_4.0/secureNoteIcons/Mastercard.png","noteMastercard"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.MEMBERSHIP]=new t("images/vault_4.0/secureNoteIcons/Membership.png","noteMembership"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.PASSPORT]=new t("images/vault_4.0/secureNoteIcons/Passport.png","notePassport"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SERVER]=new t("images/vault_4.0/secureNoteIcons/Server.png","noteServer"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SSN]=new t("images/vault_4.0/secureNoteIcons/Social_Security.png","noteSSN"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SOFTWARE_LICENSE]=new t("images/vault_4.0/secureNoteIcons/Software_License.png","noteSoftwareLicense"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SSH_KEY]=new t("images/vault_4.0/secureNoteIcons/SSH_Key.png","noteSSHKey"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.VISA]=new t("images/vault_4.0/secureNoteIcons/Visa.png","noteVisa"),NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.WIFI]=new t("images/vault_4.0/secureNoteIcons/WiFi.png","noteWiFi"),NoteDisplay.prototype.CUSTOM_NOTE_TYPE=new t("images/vault_4.0/secureNoteIcons/Secure_Note.png","noteCustom"),NoteDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_EDIT},NoteDisplay.prototype.build=function(t){var e=VaultItemDisplay.prototype.build.apply(this,arguments);return o.addClass(e,"note"),e};var e={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"},i=function(t){var o=t.split(",");if(2===o.length&&e[o[0]]&&4===o[1].length){var t=new Date(o[1]+"/"+e[o[0]]);return t.toLocaleString(bg.LPPlatform.getUILanguage(),{month:"numeric",year:"2-digit"})}return null};NoteDisplay.prototype.getPaymentCardSecondaryText=function(){var t=this._model.getKeyValuePairs(),e=i(t["Expiration Date"]),o="";return t.Number&&(o+=Strings.translateString("Ending in %1",t.Number.slice(-4))),e&&(o+=(t.Number?"  ":"")+Strings.translateString("Expires %1",e)),o},NoteDisplay.prototype.createSecondaryNameTextElement=function(){if(LPFeatures.allowOmarIA()&&!this._model.passwordProtected()){var t;switch(this._model.getNoteType()){case Note.prototype.NOTE_TYPES.CREDIT:t=this.getPaymentCardSecondaryText}if(t)return this.createTextElement("p",t,"small infoLabel")}return VaultItemDisplay.prototype.createSecondaryNameTextElement.apply(this,arguments)},NoteDisplay.prototype.getIconElement=function(){var t=this._model.isCustom()?this.CUSTOM_NOTE_TYPE:this.NOTE_TYPES[this._model.getNoteType()],e=o.createElement("div","noteFormFillIcon "+t.css);if(LPFeatures.allowOmarIA()||this._model.getNoteType()===Note.prototype.NOTE_TYPES.ADDRESS){var i=bg.get("RecordTypeConfig").types.filter(function(t){return t.noteType===this._model.getNoteType()},this).map(function(t){return bg.get("RecordTypeConfig").icons[t.id]})[0];e.appendChild(o.createElement("i",{class:["bigIcon",i]}))}else e.appendChild(o.createElement("img",{src:t.path,class:"bigIcon"}));return e},NoteDisplay.prototype.getContextMenuItems=function(t){var e=AccountBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return t||(e.push(new o.ContextMenuItem(Constants.ACTION_COPY_NOTE,{divider:!0})),this._model.hasPassword()&&e.push(new o.ContextMenuItem(Constants.ACTION_COPY_PASSWORD)),this._model.hasUsername()&&e.push(new o.ContextMenuItem(Constants.ACTION_COPY_USERNAME)),this._model.hasPrivateKey()&&e.push(new o.ContextMenuItem(Constants.ACTION_COPY_KEY))),e}}(),function(){AttachmentDisplay.prototype.getContextMenuItems=function(){var t=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return t.push(new o.ContextMenuItem(Constants.ACTION_OPEN)),t.push(new o.ContextMenuItem(Constants.ACTION_SAVE)),t.push(new o.ContextMenuItem(Constants.ACTION_DELETE,{divider:!0})),t};var t=function(t){return t.lastIndexOf(".")-2};AttachmentDisplay.prototype.getAttachmentNameFirst=function(){var e=this.getDisplayName(),o=t(e);return o>0?e.substring(0,o):e},AttachmentDisplay.prototype.getAttachmentNameSecond=function(){var e=this.getDisplayName(),o=t(e);return o>0?e.substring(o):e},AttachmentDisplay.prototype.build=function(t){var e=o.createElement("div",{class:"attachment",vaultaction:Constants.ACTION_OPEN,title:Strings.Vault.OPEN+" "+this.getDisplayName()}),i=o.createElement("div","textOverflowContainer");return i.appendChild(this.createTextElement("span",this.getAttachmentNameFirst,"attachmentName")),e.appendChild(i),e.appendChild(this.createTextElement("span",this.getAttachmentNameSecond,"attachmentName textTail")),e.appendChild(o.createElement("div",{vaultaction:Constants.ACTION_DELETE,title:Strings.Vault.DELETE,class:"deleteAttachment"})),e},AttachmentDisplay.prototype.postBuild=function(t,e){VaultItemBaseDisplay.prototype.postBuild.apply(this,arguments);var i=this._$_element;setTimeout(function(){o.setupMiddleEllipsis(i)},0)}}(),function(){FormFillDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemDisplay.prototype.getContextMenuItems.apply(this,arguments);return t||e.push(new o.ContextMenuItem(Constants.ACTION_EDIT)),e.push(new o.ContextMenuItem(Constants.ACTION_DELETE)),e},FormFillDisplay.prototype.getIconElement=function(){var t=i.decryptMobile(this._model._data.ccnum,!0,this._model.getKey()),e=LPCC.getCCIcon4_0(t),s=LPCC.getCCClass4_0(t),n=o.createElement("div",s+" noteFormFillIcon"),r=o.createElement("div");return this.includeCreditInfo()&&(r.appendChild(this.createTextElement("p",this.getCardNumberDisplay,{class:"ccNum"})),r.appendChild(this.createTextElement("p",this.getCardExpirationDisplay,{class:"ccExp"}))),r.appendChild(o.createElement("img",{src:"images/vault_4.0/"+e,class:"bigIcon"})),n.appendChild(r),n},FormFillDisplay.prototype.includeCreditInfo=function(){return this._model.isCreditCard()&&!this._model.passwordProtected()},FormFillDisplay.prototype.getCardExpirationDisplay=function(){var t=i.decryptMobile(this._model._data.ccexp,!0,this._model.getKey());return t&&(t=t.split("-"),2===t.length)?t[1]+"/"+t[0].slice(-2):"--/--"},FormFillDisplay.prototype.getCardNumberDisplay=function(){return LPCC.getFormattedNumber(i.decryptMobile(this._model._data.ccnum,!0,this._model.getKey()))},FormFillDisplay.prototype.getCardNameDisplay=function(){return i.decryptMobile(this._model._data.ccname,!0,this._model.getKey())},FormFillDisplay.prototype.build=function(t){var e=VaultItemDisplay.prototype.build.apply(this,arguments);return o.addClass(e,"formFill"),this.includeCreditInfo()&&o.addClass(e,"ccInfo"),e},FormFillDisplay.prototype.createSecondaryNameTextElement=function(){return this.includeCreditInfo()?this.createTextElement("p",this.getCardNameDisplay,"small infoLabel"):VaultItemDisplay.prototype.createSecondaryNameTextElement.apply(this,arguments)},FormFillDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_EDIT},FormFillDisplay.prototype.isDraggable=function(){return!1},FormFillDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]}}(),function(){IdentityDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return this._model._enabled||e.push(new o.ContextMenuItem(Constants.ACTION_ENABLE)),e.push(new o.ContextMenuItem(Constants.ACTION_EDIT)),e.push(new o.ContextMenuItem(Constants.ACTION_DELETE)),e},IdentityDisplay.prototype.build=function(){var t=VaultItemBaseDisplay.prototype.build.apply(this,arguments);return o.addClass(t,"identity"),t},IdentityDisplay.prototype.getIconElement=function(){return o.createElement("img",{src:"images/vault_4.0/Identity_Avatar.png",class:"bigIcon"})},IdentityDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_ENABLE},IdentityDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]},IdentityDisplay.prototype.updateEnabledClass=function(){this._model._enabled?this._$_element.addClass("enabled"):this._$_element.removeClass("enabled")},IdentityDisplay.prototype.postBuild=function(){VaultItemBaseDisplay.prototype.postBuild.apply(this,arguments),this.updateEnabledClass()},IdentityDisplay.prototype.updateView=function(){VaultItemBaseDisplay.prototype.updateView.apply(this,arguments),this.updateEnabledClass()},AllIdentityDisplay.prototype.getContextMenuItems=function(t){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);return this._model._enabled||e.push(new o.ContextMenuItem(Constants.ACTION_ENABLE)),e},AllIdentityDisplay.prototype.build=function(){var t=VaultItemBaseDisplay.prototype.build.apply(this,arguments);return o.addClass(t,"allIdentity"),t},AllIdentityDisplay.prototype.getItemButtonActions=function(){return[]},AllIdentityDisplay.prototype.handleToggleSelectedEvent=function(){}}()}($,document,LPTools,LPProxy);